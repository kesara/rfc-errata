[
  {
    "errata_id": "4670",
    "doc-id": "RFC7644",
    "errata_status_code": "Reported",
    "errata_type_code": "Technical",
    "section": "3.4.2.2",
    "orig_text": "Filters MUST be evaluated using the following order of operations, in\r\n   order of precedence:\r\n\r\n   1.  Grouping operators\r\n\r\n   2.  Logical operators - where \"not\" takes precedence over \"and\",\r\n       which takes precedence over \"or\"\r\n\r\n   3.  Attribute operators",
    "correct_text": "Filters MUST be evaluated using the following order of operations, in\r\n   order of precedence:\r\n\r\n   1.  Grouping operators\r\n\r\n   2.  Attribute operators\r\n\r\n   3.  Logical operators - where \"not\" takes precedence over \"and\",\r\n       which takes precedence over \"or\"",
    "notes": "It seems that the precedence of logical and attribute precedence is reversed? The filter filter=title sw \"M\" and userType eq \"Employee\" is meant to be interpreted as filter=(title sw \"M\") and (userType eq \"Employee\"). \r\nThis is also the \"expected\" behaviour consistent with most other languages - with the notable exception of unary \"or\" which in SCIM is disambiguated as it can only apply to a parenthesized filter expression.",
    "submit_date": "2016-04-15",
    "submitter_name": "Vassilis Michalitsis",
    "verifier_id": "99",
    "verifier_name": null,
    "update_date": "2019-09-10 09:09:03"
  },
  {
    "errata_id": "4690",
    "doc-id": "RFC7644",
    "errata_status_code": "Reported",
    "errata_type_code": "Technical",
    "section": "3.4.2.2",
    "orig_text": "valFilter = attrExp / logExp / *1\"not\" \"(\" valFilter \")\"",
    "correct_text": "valFilter = attrExp / valLogExp / *1\"not\" \"(\" valFilter \")\"\r\n\r\nvalLogExp = attrExp SP (\"and\" / \"or\") SP attrExp",
    "notes": "Figure 1 contains the ABNF for SCIM filters. The term \"logExp\" specifies \"FILTER\" as an option which unintentionally allows recursion. A valFilter should only allow simple sub-attribute expressions and simple logic.  Nesting of valuePath (e.g. attr[a eq b and attr[c eq d]]) should not be possible.",
    "submit_date": "2016-05-10",
    "submitter_name": "Phil Hunt",
    "verifier_id": "99",
    "verifier_name": null,
    "update_date": "2019-09-10 09:09:03"
  },
  {
    "errata_id": "4978",
    "doc-id": "RFC7644",
    "errata_status_code": "Reported",
    "errata_type_code": "Technical",
    "section": "4",
    "orig_text": "/ServiceProviderConfig\r\n",
    "correct_text": "/ServiceProviderConfigs\r\n",
    "notes": "Per the details provided on the SCIM website http://www.simplecloud.info/#overview, the endpoint should be /ServiceProviderConfigs. A trailing \"s\" is missing. The SCIM implementations of major service providers like Facebook, Salesforce, Slack implement /ServiceProviderConfigs",
    "submit_date": "2017-03-24",
    "submitter_name": "asgs",
    "verifier_id": "99",
    "verifier_name": null,
    "update_date": "2019-09-10 09:09:03"
  },
  {
    "errata_id": "5050",
    "doc-id": "RFC7644",
    "errata_status_code": "Reported",
    "errata_type_code": "Technical",
    "section": "3.7.3",
    "orig_text": "       {\r\n         \"method\": \"PATCH\",\r\n         \"path\": \"/Users/5d8d29d3-342c-4b5f-8683-a3cb6763ffcc\",\r\n         \"version\": \"W/\\\"edac3253e2c0ef2\\\"\",\r\n         \"data\": {[\r\n           {\r\n               \"op\": \"remove\",\r\n               \"path\": \"nickName\"\r\n           },\r\n           {\r\n               \"op\": \"add\",\r\n               \"path\": \"userName\",\r\n               \"value\": \"Dave\"\r\n           }\r\n         ]}\r\n       },\r\n",
    "correct_text": "       {\r\n         \"method\": \"PATCH\",\r\n         \"path\": \"/Users/5d8d29d3-342c-4b5f-8683-a3cb6763ffcc\",\r\n         \"version\": \"W/\\\"edac3253e2c0ef2\\\"\",\r\n         \"data\": {\r\n           \"schemas\": [\"urn:ietf:params:scim:api:messages:2.0:PatchOp\"],\r\n           \"Operations\": [\r\n               {\r\n                  “schemas”:[\"\r\n                  \"op\": \"remove\",\r\n                  \"path\": \"nickName\"\r\n               },\r\n               {\r\n                  \"op\": \"add\",\r\n                  \"path\": \"userName\",\r\n                  \"value\": \"Dave\"\r\n               }\r\n           ]\r\n         }\r\n       },",
    "notes": "The example figure is incorrect. It should show the actual patch operation request body in the JSON attribute \"data\" as it would be expressed in its own HTTP request payload.  Instead it shows the values of the \"operations\" attribute. See sec 3.7 definition of \"data\".",
    "submit_date": "2017-06-23",
    "submitter_name": "Phil Hunt",
    "verifier_id": "99",
    "verifier_name": null,
    "update_date": "2019-09-10 09:09:03"
  },
  {
    "errata_id": "5295",
    "doc-id": "RFC7644",
    "errata_status_code": "Reported",
    "errata_type_code": "Technical",
    "section": "3.5.2.1",
    "orig_text": "If the user was already a member of this group, no changes should be\r\nmade to the resource, and a success response should be returned.\r\nThe server responds with either the entire updated Group or no\r\nresponse body:\r\n\r\n   HTTP/1.1 204 No Content\r\n   Authorization: Bearer h480djs93hd8\r\n   ETag: W/\"b431af54f0671a2\"\r\n   Location:\r\n   \"https://example.com/Groups/acbf3ae7-8463-...-9b4da3f908ce\"\r\n",
    "correct_text": "If the user was already a member of this group, no changes should be\r\nmade to the resource, and a success response should be returned.\r\nThe server responds with either the entire updated Group or no\r\nresponse body:\r\n\r\n   HTTP/1.1 204 No Content\r\n   ETag: W/\"b431af54f0671a2\"\r\n",
    "notes": "The Authorization header is a request header and should not be included in a response.\r\nThe Location header is used to redirect a client to a new location or indicate the location of a new resource. Neither is the case here, so the header should be omitted.\r\n\r\nAlso, it's unclear from the text whether it's valid to respond with 204 No Content if the user was successfully added to the group.",
    "submit_date": "2018-03-22",
    "submitter_name": "Marcel van den Dungen",
    "verifier_id": "99",
    "verifier_name": null,
    "update_date": "2019-09-10 09:09:03"
  },
  {
    "errata_id": "6010",
    "doc-id": "RFC7644",
    "errata_status_code": "Reported",
    "errata_type_code": "Technical",
    "section": "4",
    "orig_text": "\"totalResults\":2,\r\n\"itemsPerPage\":10,",
    "correct_text": "\"totalResults\":2,\r\n\"itemsPerPage\":2,",
    "notes": "Per Section 3.4.2.4, \"itemsPerPage\" specifies the number of query results returned in a page. In Section 4 Figure 9, the page contains only 2 items, so the \"itemsPerPage\" should be 2 not 10.",
    "submit_date": "2020-03-09",
    "submitter_name": "Shelley Baker",
    "verifier_id": "99",
    "verifier_name": null,
    "update_date": null
  },
  {
    "errata_id": "6893",
    "doc-id": "RFC7644",
    "errata_status_code": "Verified",
    "errata_type_code": "Editorial",
    "section": "7.5.2",
    "orig_text": "HTTP/1.1 403 Forbidden\r\n\r\n  {\r\n    \"schemas\": [\"urn:ietf:params:scim:api:messages:2.0:Error\"],\r\n    \"detail\":\r\n          \"Query filter involving 'name' is restricted or confidential\",\r\n    \"scimType\": \"sensitive\",\r\n    \"status\": \"404\"\r\n  }\r\n",
    "correct_text": "HTTP/1.1 403 Forbidden\r\n\r\n  {\r\n    \"schemas\": [\"urn:ietf:params:scim:api:messages:2.0:Error\"],\r\n    \"detail\":\r\n          \"Query filter involving 'name' is restricted or confidential\",\r\n    \"scimType\": \"sensitive\",\r\n    \"status\": \"403\"\r\n  }\r\n",
    "notes": "The error \"status\" value in the figure is wrong. It should be \"403\", consistent with the normative text and the HTTP Status at the start of the figure.",
    "submit_date": "2022-03-24",
    "submitter_name": "Phil Hunt",
    "verifier_id": "2",
    "verifier_name": "RFC Editor",
    "update_date": "2022-03-25 13:49:46"
  },
  {
    "errata_id": "7122",
    "doc-id": "RFC7644",
    "errata_status_code": "Held for Document Update",
    "errata_type_code": "Technical",
    "section": "3.5.2",
    "orig_text": "   The \"path\" attribute is described by the following ABNF syntax rule:\r\n\r\n                   PATH = attrPath / valuePath [subAttr]\r\n\r\n                      Figure 7: SCIM PATCH PATH Rule\r\n\r\n   The ABNF rules \"attrPath\", \"valuePath\", and \"subAttr\" are defined in\r\n   Section 3.4.2.2.  The \"valuePath\" rule allows specific values of a\r\n   complex multi-valued attribute to be selected.",
    "correct_text": "   The \"path\" attribute is described by the following ABNF syntax rule:\r\n\r\n                   PATH = attrPath / valuePath [subAttr] / attrExp\r\n\r\n                      Figure 7: SCIM PATCH PATH Rule\r\n\r\n   The ABNF rules \"attrPath\", \"valuePath\", \"subAttr\", and \"attrExp\" are \r\n   defined in Section 3.4.2.2. The \"valuePath\" rule allows specific \r\n   values of a complex multi-valued attribute to be selected.",
    "notes": "In section 3.5.2.2. (Remove Operation), states:\r\n\r\n\"If the target location is a multi-valued attribute and a complex\r\nfilter is specified comparing a \"value\", the values matched by the\r\nfilter are removed.  If no other values remain after removal of\r\nthe selected values, the multi-valued attribute SHALL be\r\nconsidered unassigned.\"\r\n\r\nThis means it should be possible to create a filter that selects a value from a multi-valued attribute that is not complex. Writing such a filter seems impossible without having \"attrExp\" as a possible legal PATH.\r\n\r\nIn section 3.4.2.2.  (Filtering) there is an example that shows how such a filter could look for a multi-valued attribute, i.e.:\r\n\r\nfilter=\r\n schemas eq \"urn:ietf:params:scim:schemas:extension:enterprise:2.0:User\"\r\n\r\nThis would also work for a path filter, e.g.:\r\n\r\n{\r\n  \"schemas\": [\"urn:ietf:params:scim:api:messages:2.0:PatchOp\"],\r\n  \"Operations\":[{\r\n    \"op\":\"remove\",\r\n    \"path\":\"schemas eq \\\"urn:ietf:params:scim:schemas:extension:enterprise:2.0:User\\\"\"\r\n  }]\r\n}\r\n\r\n[AD Note: The document reflects consensus of the working group at the time of publication, but on review it is believed that any future update work in this space should consider this erratum.]",
    "submit_date": "2022-09-08",
    "submitter_name": "Egil Hansen",
    "verifier_id": "164",
    "verifier_name": "Murray Kucherawy",
    "update_date": "2022-09-12 09:13:03"
  }
]
